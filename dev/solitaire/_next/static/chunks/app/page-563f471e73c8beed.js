(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1823:(e,t,l)=>{Promise.resolve().then(l.bind(l,8041))},8041:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>v});var n=l(7437);let a={"♥":["\uD83C\uDCB1","\uD83C\uDCB2","\uD83C\uDCB3","\uD83C\uDCB4","\uD83C\uDCB5","\uD83C\uDCB6","\uD83C\uDCB7","\uD83C\uDCB8","\uD83C\uDCB9","\uD83C\uDCBA","\uD83C\uDCBB","\uD83C\uDCBD","\uD83C\uDCBE"],"♦":["\uD83C\uDCC1","\uD83C\uDCC2","\uD83C\uDCC3","\uD83C\uDCC4","\uD83C\uDCC5","\uD83C\uDCC6","\uD83C\uDCC7","\uD83C\uDCC8","\uD83C\uDCC9","\uD83C\uDCCA","\uD83C\uDCCB","\uD83C\uDCCD","\uD83C\uDCCE"],"♣":["\uD83C\uDCD1","\uD83C\uDCD2","\uD83C\uDCD3","\uD83C\uDCD4","\uD83C\uDCD5","\uD83C\uDCD6","\uD83C\uDCD7","\uD83C\uDCD8","\uD83C\uDCD9","\uD83C\uDCDA","\uD83C\uDCDB","\uD83C\uDCDD","\uD83C\uDCDE"],"♠":["\uD83C\uDCA1","\uD83C\uDCA2","\uD83C\uDCA3","\uD83C\uDCA4","\uD83C\uDCA5","\uD83C\uDCA6","\uD83C\uDCA7","\uD83C\uDCA8","\uD83C\uDCA9","\uD83C\uDCAA","\uD83C\uDCAB","\uD83C\uDCAD","\uD83C\uDCAE"]},r={"♥":"crimson","♦":"crimson","♣":"black","♠":"black"},i={fontSize:"1.2em",lineHeight:".615em",userSelect:"none",height:".841em",width:".637em",textIndent:"-.032em"},o={...i,transition:"transform 150ms linear",boxShadow:"1px 1px .08em black",overflow:"hidden"},s=e=>{let{overlap:t}=e;return{borderRadius:"bottom"===t?".03em .03em 0 0":"right"===t?".03em 0 0 .03em":".03em",height:"bottom"===t?".2em":i.height,width:"right"===t?".25em":i.width}},c=e=>{let{rank:t,suit:l}=e;return"".concat(["Ace","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Jack","Queen","King"][t]," of ").concat({"♥":"Hearts","♦":"Diamonds","♣":"Clubs","♠":"Spades"}[l])},u=(e,t)=>r[e.suit]!==r[t.suit],d=e=>{let{rank:t,suit:l,onClick:i,overlap:u}=e;return(0,n.jsx)("div",{onClick:()=>null==i?void 0:i({rank:t,suit:l}),role:i?"button":"none",children:(0,n.jsx)("figure",{style:{color:r[l],backgroundColor:"cornsilk",...o,...s({overlap:u}),boxShadow:("bottom"===u?"0 .1em 0 cornsilk, ":"right"===u?".1em 0 0 cornsilk, ":"")+o.boxShadow},"aria-label":c({rank:t,suit:l}),children:a[l][t]})})},h=e=>{let{overlap:t}=e;return(0,n.jsx)("figure",{style:{color:"royalblue",backgroundColor:"midnightblue",...o,...s({overlap:t}),boxShadow:("bottom"===t?"0 .1em 0 midnightblue, ":"right"===t?".1em 0 0 midnightblue, ":"")+o.boxShadow},"aria-label":"Facing-down card",children:"\uD83C\uDCA0"})},m=()=>(0,n.jsx)("figure",{style:{color:"cornsilk",...i},"aria-label":"Empty slot",children:"\uD83C\uDCDF"}),x=e=>e.reduce((e,t)=>(e[t.suit]?e[t.suit]=Math.max(Number(e[t.suit]),t.rank):e[t.suit]=t.rank,e),{});function f(e){let{foundations:t,onCardClick:l}=e,a=x(t),r=Object.keys(a);return(0,n.jsxs)("section",{className:"flex flex-row gap-x-1","aria-label":"foundations",children:[r.map((e,r)=>(0,n.jsx)(d,{suit:e,rank:a[e],onClick:()=>l({clickedCard:{suit:e,rank:a[e]},origin:{collection:t,cardIndex:t.findIndex(t=>t.suit===e&&t.rank===a[e]),name:"foundations"}})},r.toString())),[...Array(4-r.length)].map((e,t)=>(0,n.jsx)(m,{},t.toString()))]})}function b(e){let{tableau:t,onCardClick:l}=e;return(0,n.jsxs)("section",{className:"flex flex-row justify-between","aria-label":"tableau",children:[!t.length&&(0,n.jsx)(n.Fragment,{children:[...Array(7)].map((e,t)=>(0,n.jsx)(m,{},t.toString()))}),!!t.length&&t.map((e,t)=>(0,n.jsxs)("ol",{className:"flex flex-col",children:[!e.length&&(0,n.jsx)("li",{children:(0,n.jsx)(m,{})}),!!e.length&&e.map((a,r)=>{var i;return(0,n.jsx)("li",{children:a.faceUp?(0,n.jsx)(d,{rank:a.rank,suit:a.suit,overlap:(null===(i=e[r+1])||void 0===i?void 0:i.faceUp)?"bottom":null,onClick:()=>l({clickedCard:a,origin:{collection:e,tableauColumn:t,cardIndex:r,name:"tableau"}})},r):(0,n.jsx)(h,{overlap:"bottom"},r)},r)})]},t))]})}var g=l(2265);function k(e){let{stockpile:t,onCardClick:l}=e,[a,r]=(0,g.useState)([0,0]);return(0,n.jsxs)("section",{className:"flex flex-row gap-x-4","aria-label":"stockpile",children:[(0,n.jsx)("div",{className:"flex flex-row",children:!!t.length&&t.slice(a[0],a[1]).map((e,r)=>{let i=r===a[1]-a[0]-1,o=i?()=>l({clickedCard:e,origin:{collection:t,cardIndex:a[0]+r,name:"stockpile"}}):void 0;return(0,n.jsx)(d,{onClick:o,overlap:i?null:"right",...e},r.toString())})}),(0,n.jsx)("button",{onClick:()=>{if(a[1]+1>t.length)return r([0,0]);r([a[1]-a[0]<3?a[0]:a[0]+1,a[1]+1])},children:t.length>0&&a[1]<t.length?(0,n.jsx)(h,{}):(0,n.jsx)(m,{})})]})}let p=["♥","♦","♣","♠"].reduce((e,t)=>{let l=0;for(;l<=12;l+=1)e.push({rank:l,suit:t,faceUp:!0});return e},[]),j=e=>{let t=[...e],l=t.length-1;for(;l>0;l-=1){let e=Math.floor(Math.random()*(l+1));[t[l],t[e]]=[t[e],t[l]]}return t},w=e=>{let t=[...e],l=[];for(let e=0;e<7;e+=1){let n=t.splice(0,e+1);l.push(n.map((e,t)=>t<n.length-1?{...e,faceUp:!1}:e))}return{tableau:l,stockpile:t,foundations:[]}},C=e=>{let{collection:t,cardIndex:l,name:n}=e;switch(n){case"foundations":return t.filter((e,t)=>t!==l);case"stockpile":return t.filter((e,t)=>t!==l);case"tableau":return t.slice(0,l).map((e,t)=>t===l-1?{...e,faceUp:!0}:e)}};function v(){let[e,t]=(0,g.useState)([]),[l,a]=(0,g.useState)([]),[r,i]=(0,g.useState)([]),o=l=>{let{clickedCard:n,origin:o}=l,s=C(o);switch(o.name){case"stockpile":a(s);break;case"tableau":t(Object.assign([],e,{[o.tableauColumn]:s}))}let c=[...r,{...n,faceUp:!0}];i(c),52===c.length&&setTimeout(()=>{alert("You won!"),window.location.reload()},150)},s=l=>{let{clickedCard:n,origin:r,colIndex:o}=l,s=C(r),c=[],u={};switch(r.name){case"foundations":i(s);break;case"stockpile":a(s);break;case"tableau":c=r.collection.slice(r.cardIndex+1),u=r.tableauColumn?{[r.tableauColumn]:s}:{}}let d={[o]:[...e[o],{...n,faceUp:!0},...c]};t(Object.assign([],e,d,u))},c=t=>{let{clickedCard:l,origin:n}=t,a="tableau"===n.name?n.collection.slice(n.cardIndex+1):[];if("foundations"!==n.name&&!a.length&&(0===l.rank||x(r)[l.suit]===l.rank-1))return o({clickedCard:l,origin:n});if(12===l.rank){let t=e.findIndex(e=>!e.length);if(t>=0)return s({clickedCard:l,origin:n,colIndex:t})}e.forEach((e,t)=>{let a=e[e.length-1];if(a&&a.rank===l.rank+1&&u(a,l))return s({clickedCard:l,origin:n,colIndex:t})})};return(0,g.useEffect)(()=>{let{tableau:e,stockpile:l,foundations:n}=w(j(p));t(e),a(l),i(n)},[]),(0,n.jsxs)("main",{className:"flex flex-col gap-y-8 max-w-[80vw] mx-auto",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(f,{foundations:r,onCardClick:c}),(0,n.jsx)(k,{stockpile:l,onCardClick:c})]}),(0,n.jsx)(b,{tableau:e,onCardClick:c})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[130,215,744],()=>t(1823)),_N_E=e.O()}]);